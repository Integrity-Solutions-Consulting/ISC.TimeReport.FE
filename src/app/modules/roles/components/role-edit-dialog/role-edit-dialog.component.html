<h2 mat-dialog-title>{{isEditMode ? 'Editar Rol' : 'Crear Nuevo Rol'}}</h2>

<mat-dialog-content>
  <form [formGroup]="roleForm" *ngIf="!isLoading">
    <mat-form-field appearance="outline" class="full-width">
      <input matInput formControlName="roleName" placeholder="Nombre de Rol" required>
      <mat-error *ngIf="roleForm.get('roleName')?.hasError('required')">
        El nombre del rol es requerido
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <input matInput formControlName="description" placeholder="Descripción" rows="3">
    </mat-form-field>

    <h3>Módulos Accesibles</h3>
    <mat-selection-list formControlName="moduleIds">
      <mat-list-option *ngFor="let module of allModules" [value]="module.id" checkboxPosition="before">
        <!--<mat-icon matListIcon>{{module.icon}}</mat-icon>-->
        <div matLine>{{module.moduleName}}</div>
        <!--<div matLine>{{module.modulePath}}</div>-->
      </mat-list-option>
    </mat-selection-list>
  </form>

  <mat-spinner *ngIf="isLoading" diameter="40"></mat-spinner>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Cancelar</button>
  <button mat-raised-button color="primary" (click)="onSave()" [disabled]="roleForm.invalid">
    {{isEditMode ? 'Actualizar' : 'Crear'}}
  </button>
</mat-dialog-actions>
