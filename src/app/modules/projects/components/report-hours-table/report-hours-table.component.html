<!-- TARJETA DE FILTROS EN HORIZONTAL -->
<div class="filter-card">
  <div class="filter-row">

    <!-- CLIENTE -->
    <mat-form-field appearance="outline" class="filter-item">
      <mat-label>Cliente</mat-label>
      <input
        matInput
        placeholder="Buscar cliente"
        [formControl]="clientFilter"
        [matAutocomplete]="autoClient"
      />

      <mat-autocomplete #autoClient="matAutocomplete">
        <mat-option value="Todos">Todos</mat-option>
        <mat-option *ngFor="let c of filteredClients" [value]="c">
          <mat-icon class="option-icon">business</mat-icon>
          {{ c }}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>

    <!-- AÑO -->
    <mat-form-field appearance="outline" class="filter-item small">
      <mat-label>Año</mat-label>
      <mat-select [formControl]="yearFilter">
        <mat-option [value]="null">Todos</mat-option>
        <mat-option *ngFor="let y of years" [value]="y">
          {{ y }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- MES -->
    <mat-form-field appearance="outline" class="filter-item small">
      <mat-label>Mes</mat-label>
      <mat-select [formControl]="monthFilter">
        <mat-option [value]="null">Todos</mat-option>
        <mat-option *ngFor="let m of months" [value]="m.value">
          {{ m.label }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- BOTONES -->
    <div class="export-btn-wrapper">
      <button mat-flat-button color="primary" (click)="exportToExcel()">
        <mat-icon>download</mat-icon>
        Exportar
      </button>

      <button mat-button color="primary" class="clear-btn" (click)="clearFilters()">
        <mat-icon>filter_alt_off</mat-icon>
        Limpiar filtros
      </button>
    </div>

  </div>
</div>

<!-- WRAPPER DE LA TABLA CON LOADER -->
<div class="table-wrapper">

  <!-- OVERLAY DE CARGA -->
  <div class="table-loading-overlay" *ngIf="loading">
    <mat-spinner diameter="60"></mat-spinner>
    <p>Cargando datos...</p>
  </div>

  <!-- TABLA REAL -->
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z2 full-table">

    <ng-container matColumnDef="client">
      <th mat-header-cell *matHeaderCellDef>Cliente</th>
      <td mat-cell *matCellDef="let row">{{ row.client }}</td>
    </ng-container>

    <ng-container matColumnDef="year">
      <th mat-header-cell *matHeaderCellDef>Año</th>
      <td mat-cell *matCellDef="let row">{{ row.year }}</td>
    </ng-container>

    <ng-container matColumnDef="month">
      <th mat-header-cell *matHeaderCellDef>Mes</th>
      <td mat-cell *matCellDef="let row">{{ row.month }}</td>
    </ng-container>

    <ng-container matColumnDef="resources">
      <th mat-header-cell *matHeaderCellDef>Recursos</th>
      <td mat-cell *matCellDef="let row">{{ row.resources }}</td>
    </ng-container>

    <ng-container matColumnDef="totalHours">
      <th mat-header-cell *matHeaderCellDef>Horas Totales</th>
      <td mat-cell *matCellDef="let row">{{ row.totalHours }}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

  </table>

  <mat-paginator [pageSize]="10"></mat-paginator>
</div>
